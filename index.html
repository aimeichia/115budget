<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>115年度中央氣象署：預算績效、重大計畫與檔案對照系統</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Noto Sans TC', sans-serif; scroll-behavior: smooth; }
        .chart-container { position: relative; width: 100%; max-width: 900px; margin: 0 auto; height: 350px; }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f5f9; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .active-tab { border-bottom: 4px solid #0ea5e9; color: #0ea5e9; background-color: #f0f9ff; font-weight: bold; }
        .qa-active { border-left: 4px solid #ef4444 !important; background-color: #fef2f2 !important; }
        
        .project-btn { transition: all 0.2s ease-in-out; border-left: 4px solid transparent; }
        .project-btn:hover { background-color: #f8fafc; border-left-color: #0ea5e9; color: #0ea5e9; }
        .project-active { background-color: #0ea5e9 !important; color: white !important; border-left-color: #38bdf8 !important; box-shadow: 0 4px 12px -2px rgba(14, 165, 233, 0.3); }

        .file-link-card { transition: all 0.2s; border: 1px solid #e2e8f0; background: #fff; }
        .file-link-card:hover { border-color: #0ea5e9; background-color: #f0f9ff; transform: translateY(-2px); box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); }
        
        .bg-marine { background: linear-gradient(135deg, #075985 0%, #0c4a6e 100%); }
    </style>

    <!-- Chosen Palette: Meteorological Decision Pro (Slate 950, Sky 600, Indigo 500, Emerald 500) -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="bg-slate-50 text-slate-800 text-sm">

    <!-- Navbar -->
    <nav class="bg-slate-900 text-white sticky top-0 z-50 shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex items-center gap-3">
                    <i class="fa-solid fa-cloud-sun text-sky-400 text-2xl"></i>
                    <span class="font-bold text-lg text-white">115年度 氣象預算管理與檔案對照系統</span>
                </div>
                <div class="hidden lg:flex space-x-6">
                    <a href="#summary" class="hover:text-sky-400 font-bold">數據總覽</a>
                    <a href="#strategic-view" class="hover:text-sky-400 font-bold">主要計畫看板</a>
                    <a href="#performance" class="hover:text-sky-400 font-bold">組室全績效</a>
                    <a href="#qa-vault" class="hover:text-sky-400 font-bold">立院攻防題庫</a>
                    <a href="#references" class="bg-sky-600 px-3 py-1 rounded text-white font-bold hover:bg-sky-500 transition-colors">檔案確認</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Header KPI Summary (Target: Redesigned for Total Comparison) -->
    <header id="summary" class="py-12 bg-white border-b shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 text-center md:text-left">
                <div class="p-6 bg-slate-950 rounded-[2rem] text-white shadow-xl">
                    <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1">115 歲出概算總額</p>
                    <p class="text-3xl font-black">3,004,946</p>
                    <p class="text-[10px] text-slate-500">單位：千元 (約 30.05 億)</p>
                </div>
                <div class="p-6 bg-slate-100 rounded-[2rem] border border-slate-200">
                    <p class="text-[10px] font-bold text-slate-500 uppercase mb-1">114 歲出法定預算</p>
                    <p class="text-3xl font-black text-slate-700">2,516,125</p>
                    <p class="text-[10px] text-slate-500">單位：千元 (約 25.16 億)</p>
                </div>
                <div class="p-6 bg-sky-50 rounded-[2rem] border border-sky-100">
                    <p class="text-[10px] font-bold text-sky-600 uppercase mb-1">年度經費增額</p>
                    <p class="text-3xl font-black text-sky-600">+488,821</p>
                    <p class="text-[10px] text-sky-500 font-bold">增幅達 19.43%</p>
                </div>
                <div class="p-6 bg-emerald-50 rounded-[2rem] border border-emerald-100 shadow-sm flex flex-col justify-center">
                    <p class="text-[10px] font-bold text-emerald-600 uppercase mb-1">預算成長核心動能</p>
                    <p class="text-xl font-bold text-emerald-700">數位轉型與關鍵公建</p>
                    <p class="text-[10px] text-emerald-500 italic">含 HPC、P7、智慧海象等計畫</p>
                </div>
            </div>
        </div>
    </header>

    <!-- Strategic Project Dashboard (Restored Left-List UI) -->
    <section id="strategic-view" class="py-16 bg-slate-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="mb-12 border-l-8 border-indigo-600 pl-6">
                <h2 class="text-3xl font-bold text-slate-900 flex items-center gap-3">
                    <i class="fa-solid fa-microchip text-sky-600"></i> 主要計畫績效地圖
                </h2>
                <p class="mt-4 text-slate-600 font-medium">數據校正：HPC(345,903k) | R計畫(339,650k) | O計畫(388,590k)。請由左側選擇代碼查看詳情。</p>
            </div>

            <div class="bg-white rounded-[2.5rem] shadow-2xl border border-slate-200 overflow-hidden flex flex-col lg:flex-row min-h-[700px]">
                <!-- Project Side Selector -->
                <div class="lg:w-1/3 bg-slate-900 text-white p-6 flex flex-col">
                    <div class="mb-8 p-2 font-bold text-slate-400 text-xs uppercase tracking-widest border-b border-slate-800 pb-4 text-center">
                        115年度 核心計畫清單
                    </div>
                    <div class="space-y-3 flex-1 overflow-y-auto no-scrollbar" id="major-project-list">
                        <!-- JS Populated -->
                    </div>
                </div>

                <!-- Project Detail Viewer -->
                <div class="lg:w-2/3 p-10 relative overflow-y-auto custom-scrollbar bg-white" id="major-project-display">
                    <!-- JS Populated Default -->
                    <div class="h-full flex flex-col items-center justify-center text-slate-300 opacity-40">
                        <i class="fa-solid fa-rocket text-8xl mb-6"></i>
                        <p class="text-xl">請點選左側計畫代號查閱詳情</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Comprehensive Unit Explorer (Expanded Details) -->
    <section id="performance" class="py-16 bg-white border-y">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="mb-10 flex flex-col md:flex-row justify-between items-end gap-4 text-left">
                <div>
                    <h2 class="text-3xl font-bold text-slate-900">九大組室 OKR 與 深度績效庫</h2>
                    <p class="mt-4 text-slate-500 font-medium max-w-2xl">擷取 9 份組室規劃簡報與 PDF 內容。涵蓋行政、觀測、預報、氣象史料及跨域服務之全部核心細節。</p>
                </div>
                <div class="text-xs text-slate-400 italic">點擊分頁查看組室數據</div>
            </div>

            <div class="flex gap-2 border-b border-slate-200 mb-8 overflow-x-auto no-scrollbar" id="unit-tabs-container">
                <!-- JS Populated Tabs -->
            </div>

            <div id="unit-content-display" class="fade-in">
                <!-- JS Populated Content -->
            </div>
        </div>
    </section>

    <!-- Full Legislative QA Archive -->
    <section id="qa-vault" class="py-16 bg-slate-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <span class="bg-rose-100 text-rose-600 text-xs font-bold px-4 py-1.5 rounded-full uppercase tracking-widest">立法院 1031 修訂版預擬答題庫 (全量整合)</span>
                <h2 class="text-3xl font-bold text-slate-900 mt-4">預算中心質詢與官方攻防全記錄</h2>
                <p class="mt-4 text-slate-500 max-w-2xl mx-auto italic text-sm">本區塊完整收錄預擬答題 PDF 的所有 6 大議題。移除個人疑問，僅保留正式答詢邏輯。</p>
            </div>

            <div class="bg-white rounded-[2rem] border border-slate-200 shadow-2xl overflow-hidden flex flex-col md:flex-row h-[800px]">
                <div class="w-full md:w-1/3 border-r bg-slate-50 flex flex-col">
                    <div class="p-4 border-b">
                        <input type="text" id="qa-search" onkeyup="filterQA()" placeholder="搜尋質詢議題..." class="w-full p-4 rounded-xl border text-sm shadow-inner focus:ring-2 focus:ring-sky-500 focus:outline-none">
                    </div>
                    <div class="flex-1 overflow-y-auto custom-scrollbar" id="qa-list-container">
                        <!-- JS Populated -->
                    </div>
                </div>
                <div class="w-full md:w-2/3 p-10 overflow-y-auto custom-scrollbar bg-white" id="qa-detail-display">
                    <!-- JS Populated QA Detail View -->
                </div>
            </div>
        </div>
    </section>

    <!-- Reference Files Section -->
    <section id="references" class="py-16 bg-white border-t">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="mb-12 border-l-8 border-sky-600 pl-6">
                <h2 class="text-3xl font-bold text-slate-900">原始參考檔案與驗證清單</h2>
                <p class="mt-4 text-slate-600 font-medium">點選檔案標題查閱數據原始出處。系統內容與 115 年度正式預算規劃文件完全一致。</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="reference-list">
                <!-- JS Populated File Links -->
            </div>
        </div>
    </section>

    <footer class="bg-slate-950 text-slate-600 py-16 text-center">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <p class="text-sm">交通部中央氣象署 115 年度預算績效決策管理系統</p>
            <p class="text-xs mt-3 opacity-60 italic">校正紀錄：HPC 分配數 345,903k | R 計碼 339,650k | O 計畫 388,590k | E 計畫 32,700k</p>
        </div>
    </footer>

    <!-- JS Implementation -->
    <script>
        // --- DATA 1: STRATEGIC PROJECTS (Corrected per Instructions) ---
        const strategicProjects = [
            { 
                id: 'HPC', 
                name: '數值天氣測報高速運算電腦建設 (六期)', 
                code: 'HPC (2/9)',
                budget: '345,903', 
                owner: '數值資訊組', 
                icon: 'fa-server', 
                works: [
                    '支付第六期硬體採購分配款項（經常門）。',
                    '建置高效能算力軟體環境與 AI 作業節點佈建。',
                    '優化署本部資料中心電力冷卻，維持可用性達 99.95%。'
                ],
                okr: '建置 GPU 高效運算核心支撐氣象 AI 研發與模式訓練，確保國家運算中心資料處理穩定度。',
                kpi: '算力核心可用性 99.95%',
                benefit: '提供國家級算力心臟，支撐新一代數據驅動氣象預報系統，預報時效縮短 30% 以上。',
                source: '主計室 CSV (經常門分配數) / 數值組 PPTX'
            },
            { 
                id: 'R', 
                name: '精進氣象雷達與災防預警 (R 計畫)', 
                code: 'R計畫 (2/6)',
                budget: '339,650', 
                owner: '海氣遙測組 / 預報中心 / 科發組', 
                icon: 'fa-satellite-dish', 
                works: [
                    '金馬雷達建置：支付雷達採購契約款項及馬祖站房工程費。',
                    '執行馬祖站房監造案與金門雷達站房細部規劃設計。',
                    '發展無縫隙雨量及智能即時預警服務系統。',
                    '維護全台雙偏極化雷達網妥善率。'
                ],
                okr: '填補大陸對流移入監測盲區，建構西部海域完整之氣象監控網，強化劇烈天氣早期預警。',
                kpi: '雷達觀測妥善率 95%',
                benefit: '提升金馬濃霧與降雨監測時效，保障海空航行安全，爭取早期避災反應時間。',
                source: '115年重要工作 PDF P.15 / 主計室分配表'
            },
            { 
                id: 'O', 
                name: '智慧海象治理與氣候韌性提升', 
                code: 'O計畫 (1/6)',
                budget: '388,590', 
                owner: '海象氣候組', 
                icon: 'fa-water', 
                works: [
                    '建置智慧海象浮標觀測網：精進海域海象監測技術。',
                    '建立臺灣乾旱整合資訊平臺：提供跨機關決策支援服務。',
                    '開發 MPAS/JEDI 海象預報模式動力核心系統。',
                    '精進藍色公路波浪預報產製流程。'
                ],
                okr: '整合跨組室乾旱監測，優化藍色公路與海事氣象服務準確度。',
                kpi: '海象觀測網妥善率 95%',
                benefit: '降低冬季澎湖養殖寒害損害，協助提前規劃抗旱策略，提升海域活動導航安全。',
                source: '重要工作.pdf P.9 / 海象組 PPTX'
            },
            { 
                id: 'P7', 
                name: '氣象風險數位治理與跨域應用創新', 
                code: 'P7計畫 (1/6)',
                budget: '325,000', 
                owner: '科技發展組', 
                icon: 'fa-vial-circle-check', 
                works: [
                    '導入前瞻 AI 預報模式研發、在地化驗證與訓練。',
                    '解決 14 天內之無縫隙預報斷層，提供農林、光電指引。',
                    '建構產業氣候風險管理應用平臺。',
                    '辦理氣象科技跨域技術研討與人才培育。'
                ],
                okr: '發展動力與數據雙軌並行模式，將數據轉化為具經濟價值之決策支援輔助。',
                kpi: '年度計畫執行率 100%',
                benefit: '解決產業風險資訊不對稱，強化國家地面與高空監測數位韌性，接軌國際 AI。',
                source: '重要工作.pdf P.6 / 科發組 PPTX'
            },
            { 
                id: 'E', 
                name: '臺灣南部海域地震海嘯海底監測系統', 
                code: 'E計畫 (建置期)',
                budget: '32,700', 
                owner: '地震測報中心', 
                icon: 'fa-anchor', 
                works: [
                    '執行南部海底海纜鋪設工程與陸上站維運整合。',
                    '海纜建置案委託行政費與既有設備升級重置工項。',
                    '優化強震監測系統之即時資料傳輸與備援韌性。'
                ],
                okr: '推動南部海纜海底設備施工，極大化縮短強震與海嘯預警之黃金應變秒數。',
                kpi: '地震預警增加 10-20 秒',
                benefit: '保護南部工業區與關鍵設施，爭取海嘯避難時間，顯著降低強震致災衝擊。',
                source: '地震中心 PPTX / 預算分支計畫說明書'
            }
        ];

        // --- DATA 2: ALL 9 UNITS (Full OKR/KPI Details) ---
        const units = [
            { 
                id: '數值組', 
                icon: 'fa-database', 
                full_okr: '1. 維持高速電腦與資料中心可用性達 99.95%。<br>2. 建置新竹氣象科技園區並完成 10% 工程進度。<br>3. 推動 PDS 即時資料供應平臺，處理效能提升 20%。<br>4. 落實資安 SOC 監控、邊境防禦及 VANS 社交工程演練。', 
                kpis: [{t:'HPC可用性', v:'99.95%'}, {t:'PDS效能', v:'+20%'}, {t:'資安演練', v:'100%'}], 
                benefit: '確保國家級氣象算力核心穩定，提升氣象大數據開放與供應之安全性與時效。', 
                source: '數值組 115工項規劃 PPTX' 
            },
            { 
                id: '預報中心', 
                icon: 'fa-sun-cloud', 
                full_okr: '1. 建立動力基礎地面分析場，提升精度 15%。<br>2. 研發紫外線逐 3 小時預報模組，提升生活化氣象資訊。<br>3. 正式上線鄉鎮沿海大雷雨即時訊息預警系統。<br>4. 研發自動預報繪圖技術，節省繪圖人力 50% 以上。', 
                kpis: [{t:'預警鄉鎮數', v:'368處'}, {t:'繪圖效率', v:'+50%'}, {t:'分析精度', v:'+15%'}], 
                benefit: '提供公眾更精緻、在地化且即時之預警資訊，大幅釋放預報員量能專注劇烈天氣研判。', 
                source: '預報中心 115工項規劃 PPTX' 
            },
            { 
                id: '地震中心', 
                icon: 'fa-house-crack', 
                full_okr: '1. 執行南部海纜海底設備鋪設與陸上站穩定維運。<br>2. 開發機器學習(AI)地震定位與強震預警處理技術。<br>3. 優化 GDMS 資料庫，年度資料查詢量目標 320 萬筆。<br>4. 升級全國 GNSS 設備，強化地殼形變動態監測能力。', 
                kpis: [{t:'預警多秒', v:'10-20s'}, {t:'測站妥善率', v:'95%'}, {t:'GDMS查詢', v:'320萬筆'}], 
                benefit: '極大化地震預警反應時間，降低半導體產業與大眾運輸之強震風險損害。', 
                source: '地震測報中心 115工項規劃 PPTX' 
            },
            { 
                id: '海象氣候', 
                icon: 'fa-droplet', 
                full_okr: '1. 建立乾旱整合資訊平臺，強化跨域水資源支援。<br>2. 研發 MPAS 新一代海象預報動力核心架構。<br>3. 產製次季節尺度之氣候機率預報產品。<br>4. 更新藍色公路預報，提升波浪、海流預報準確度。', 
                kpis: [{t:'乾旱平台', v:'1套'}, {t:'波浪精準', v:'+10%'}, {t:'觀測網妥善', v:'95%'}], 
                benefit: '提升海域航行安全，協助調適極端旱澇風險，保障藍色經濟與沿海養殖安全。', 
                source: '海象氣候組 115工項規劃 PPTX' 
            },
            { 
                id: '觀測組', 
                icon: 'fa-wind', 
                full_okr: '1. 執行 50 航次無人機垂直剖面觀測，獲取邊界層參數。<br>2. 建置迷你探空自動化觀測網試點。<br>3. 維運全國綜觀站與自動雨量站，妥善率 98% 以上。<br>4. 完成 ISO 17025 儀器校正實驗室之國家級標準評鑑。', 
                kpis: [{t:'雨量站妥善', v:'98%'}, {t:'UAV航次', v:'50次'}, {t:'儀器校正', v:'100%'}], 
                benefit: '守護國家氣象觀測數據品質，為數值預報提供高品質初始場，精進降雨預測能力。', 
                source: '大氣觀測組 115工項規劃 PPTX' 
            },
            { 
                id: '科發組', 
                icon: 'fa-vial-circle-check', 
                full_okr: '1. 統籌 P7 數位治理計畫產學合作與 AI 模式開發。<br>2. 辦理 12 場氣象科技交流與跨域技術合作研討。<br>3. 經營氣象科技圖書館及學術學報出版品質維修。<br>4. 強化與民航、太空中心(TASA)之氣象技術合作。', 
                kpis: [{t:'計畫執行率', v:'100%'}, {t:'技術論壇', v:'12場'}, {t:'學術館藏', v:'100%'}], 
                benefit: '引領全署智慧化轉型，整合國內頂尖學研能量，培育次世代氣象科技研發人才。', 
                source: '科技發展組 115工項規劃 PPTX' 
            },
            { 
                id: '遙測組', 
                icon: 'fa-tower-observation', 
                full_okr: '1. 推動馬祖站房動工、金門規劃與 4 部雷達契約支付。<br>2. 維護全台 S-Band 雙偏極化雷達網穩定觀測指標。<br>3. 執行劇烈天氣機動監測與海象遙測資料面化。', 
                kpis: [{t:'雷達妥善率', v:'95%'}, {t:'工項達成率', v:'100%'}], 
                benefit: '補足西部海域預警盲區，強化金馬濃霧與降雨監測，保障重要航道與飛安穩定。', 
                source: '海氣遙測組 115工項規劃 PPTX' 
            },
            { 
                id: '綜規組', 
                icon: 'fa-sitemap', 
                full_okr: '1. 辦理全國 13 處測站風險管理訪視與內控複核。<br>2. 執行產業滿意度調查及氣象法規調適研擬。<br>3. 維護署本部展場空間與氣象傳播平臺運作。<br>4. 辦理宜蘭等站區之草皮維護與環境管護委外。', 
                kpis: [{t:'訪視達成率', v:'100%'}, {t:'滿意度調查', v:'1次'}, {t:'內控評估', v:'100%'}], 
                benefit: '健全組織治理架構，強化測站維運韌性，提升氣象服務與產業之對接效益。', 
                source: '綜合規劃組 115工項規劃 PPTX' 
            },
            { 
                id: '南區中心', 
                icon: 'fa-landmark', 
                full_okr: '1. 執行 100 場環境教育課程與科普到校服務。<br>2. 完成 1.2 萬件關鍵史料影像處理與數位化編目。<br>3. 製作線上史料文庫供查詢，活化文史資源。<br>4. 維護南部備援機房設施及辦公建築電力安全。', 
                kpis: [{t:'教育受眾', v:'5k人'}, {t:'史料編目', v:'1.2萬件'}, {t:'場域妥善', v:'100%'}], 
                benefit: '保存珍貴國家氣象文史資產，深耕南台灣防災科普意識，並提供實體資料備援。', 
                source: '南區氣象中心 115工項規劃 PPTX' 
            }
        ];

        // --- DATA 3: FULL QA ARCHIVE ---
        const fullQA = [
            { id: 'q1', title: '氣象風險數位治理計畫 (規模質疑)', issue: '新增辦理總經費 22.5 億元之計畫,允宜強化科技前瞻布局。', question: '為何需要如此大規模預算？AI 預報模型能否取代現有物理模式？', answer: '計畫接軌國際趨勢。採取動力與 AI 雙軌並行(Hybrid)。重點在解決 14 天預報斷層，並針對農林光電提供指引。115 年 3.25 億主要用於 AI 模型研發與跨域介接，非單純買硬體，旨在建立國家自主研發能力。', source: '預擬答題 PDF P.3' },
            { id: 'q2', title: '高速運算電腦第六期 (缺失檢討)', issue: '辦理「數值天氣測報高速運算電腦建設計畫」,允宜檢討前期執行期間未妥處。', question: '如何解決前期計畫中的電力與冷卻缺失？預算編列是否核實？', answer: '已檢討五期電力散熱缺失，六期導入液冷技術節能，目標 PUE 低於 1.4。預算增列係支付年度硬體款與算力環境建置費。預算皆按契約節點核實編列。', source: '預擬答題 PDF P.4' },
            { id: 'q3', title: '南部海纜計畫 (進度延宕檢討)', issue: '計畫執行多年進度落後且修正頻繁,允宜檢討採購策略。', question: '115 年經費如何保證成效？路由修正後之強韌度如何？', answer: '因南部海域地形極險惡導致難度超乎預期。已調整採購策略，選用強化型纜線避開不穩定海床。115 年進入海底設備鋪設高峰，完工後可爭取南部 10-20 秒預警時間，具極大減災價值。', source: '預擬答題 PDF P.7' },
            { id: 'q4', title: '金馬雷達建設 (預算突然翻倍說明)', issue: '115 年度預算案較 114 年度增列 8,970 萬元,增幅過大。', question: '預算為何暴增？雷達建置對災防有何具體意義？', answer: '預算變動係由規劃期進入「設備採購」與「土建高峰」期。支付 4 部雷達契約分期款 (7,000 萬) 及馬祖站房費 (5,300 萬)。預算完全依進度核實編列，用以監控大陸對流移入盲區。', source: '預擬答題 PDF P.11' },
            { id: 'q5', title: '預報中心預算縮減說明 (挪移疑義)', issue: '氣象署總預算增 19%，預報中心預算卻減少？', question: '是否會影響防災品質？人力如何因應轉型？', answer: '屬「專案計畫重整」。原本中心辦理之數位化項目併入 P7 計畫統籌。中心重心轉向「預報員 AI 賦能」。基本維運預算與人力並無縮減，品質將因科技整合提升。', source: '預擬答題 PDF P.13' },
            { id: 'q6', title: '資安防護韌性與 CI 站點安全', issue: '強化氣象資訊服務韌性與資料備援。', question: '7,650 萬經費如何保障資料安全？面對駭客攻擊之應變？', answer: '預算用於 24/7 SOC 監控、22 處關鍵基礎設施(CI)實體與網絡隔離、年度外部認證複評。確保即使在遭受攻擊時，警報發布系統仍能維持不中斷運作。', source: '預擬答題 PDF P.15' }
        ];

        // --- DATA 4: SOURCE FILES ---
        const referenceFiles = [
            { id: 'F1', name: '115年重要工作規劃說明.pdf', desc: '主要計畫數據與工項之核心依據', type: 'PDF' },
            { id: 'F2', name: '115年預算評估報告預擬答題(彙整)1031修.pdf', desc: '立院質詢全量攻防答辯來源', type: 'PDF' },
            { id: 'F3', name: '115年組室經費與工項規劃簡報 (9份)', desc: '組室 OKR 與 KPI 之主要績效來源', type: 'PPTX' },
            { id: 'F4', name: '主計室_115組室別預算分配表.csv', desc: '各單位預算分配對照原始數據', type: 'CSV' },
            { id: 'F5', name: '115氣象署預算案0825.pdf', desc: '署內正式單位預算與科目法定數', type: 'PDF' }
        ];

        // --- RENDER FUNCTIONS ---

        document.addEventListener('DOMContentLoaded', () => {
            renderMajorProjects();
            renderUnitTabs();
            showUnit(units[0].id);
            renderQAList(fullQA);
            renderReferenceFiles();
        });

        function renderMajorProjects() {
            const container = document.getElementById('major-project-list');
            container.innerHTML = strategicProjects.map(p => `
                <button onclick="showProjectDetail('${p.id}')" id="proj-btn-${p.id}" class="project-btn w-full text-left p-5 rounded-2xl border border-white/10 flex items-center gap-4 transition-all">
                    <div class="w-10 h-10 bg-white/10 rounded-xl flex items-center justify-center text-sky-400">
                        <i class="fa-solid ${p.icon} text-xl"></i>
                    </div>
                    <div>
                        <p class="text-[10px] text-slate-500 font-bold uppercase tracking-widest">${p.id} 計碼</p>
                        <h4 class="text-sm font-bold text-slate-300 leading-tight">${p.name}</h4>
                    </div>
                </button>
            `).join('');
            showProjectDetail('HPC');
        }

        window.showProjectDetail = function(id) {
            const p = strategicProjects.find(item => item.id === id);
            const container = document.getElementById('major-project-display');
            document.querySelectorAll('#major-project-list button').forEach(b => b.classList.remove('project-active'));
            document.getElementById(`proj-btn-${id}`).classList.add('project-active');

            container.innerHTML = `
                <div class="fade-in space-y-10 text-left">
                    <div class="flex flex-col md:flex-row justify-between items-start gap-6">
                        <div class="flex-1">
                            <span class="px-4 py-1 bg-indigo-100 text-indigo-700 rounded-full text-[10px] font-black uppercase tracking-widest">${p.code}</span>
                            <h3 class="text-4xl font-black text-slate-900 leading-tight mt-6">${p.name}</h3>
                            <p class="text-slate-500 mt-2 font-medium">主責單位：${p.owner} | <span class="text-sky-600 font-bold tracking-tighter">來源：${p.source}</span></p>
                        </div>
                        <div class="bg-slate-900 text-white p-8 rounded-[2.5rem] text-center shadow-2xl min-w-[220px]">
                            <p class="text-[10px] opacity-40 uppercase tracking-widest mb-1">115年分配經費</p>
                            <p class="text-3xl font-black">${p.budget}</p>
                            <p class="text-xs opacity-60">千元 (TWD)</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div class="bg-slate-50 p-8 rounded-3xl border border-slate-100 flex flex-col justify-between shadow-inner">
                            <div>
                                <h4 class="text-xs font-bold text-slate-400 uppercase mb-5 tracking-widest border-b pb-2">115年度 規劃辦理核心工項</h4>
                                <ul class="space-y-4">
                                    ${p.works.map(w => `<li class="flex gap-3 text-sm text-slate-700 font-medium"><i class="fa-solid fa-circle-check text-indigo-500 mt-0.5"></i>${w}</li>`).join('')}
                                </ul>
                            </div>
                            <div class="mt-8 pt-6 border-t border-slate-200">
                                <h4 class="text-xs font-bold text-slate-400 uppercase mb-3 tracking-widest text-slate-500">年度關鍵成果 (OKR)</h4>
                                <p class="text-slate-800 font-bold text-base leading-relaxed italic">「${p.okr}」</p>
                            </div>
                        </div>
                        <div class="bg-marine p-8 rounded-3xl text-white shadow-xl flex flex-col justify-between">
                            <div>
                                <h4 class="text-xs font-bold text-sky-200 uppercase mb-4 tracking-widest">量化績效指標 (KPI)</h4>
                                <p class="text-5xl font-black mb-2">${p.kpi}</p>
                                <p class="text-sm opacity-80 leading-relaxed italic">本數據為計畫執行水準之年度核心標竿。</p>
                            </div>
                            <div class="mt-10 bg-black/20 p-6 rounded-2xl border border-white/10 shadow-inner">
                                <h4 class="text-[10px] font-bold text-sky-200 uppercase mb-2 tracking-widest">115年度 預期施政效益</h4>
                                <p class="text-sm text-sky-50 font-medium leading-relaxed italic">「${p.benefit}」</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderUnitTabs() {
            const container = document.getElementById('unit-tabs-container');
            container.innerHTML = units.map(u => `
                <button onclick="showUnit('${u.id}')" id="tab-${u.id}" class="flex-shrink-0 px-6 py-4 rounded-t-xl text-sm font-bold transition-all hover:text-sky-600">
                    <i class="fa-solid ${u.icon} mr-2"></i> ${u.id}
                </button>
            `).join('');
        }

        window.showUnit = function(id) {
            const u = units.find(item => item.id === id);
            const container = document.getElementById('unit-content-display');
            document.querySelectorAll('#unit-tabs-container button').forEach(b => b.classList.remove('active-tab'));
            document.getElementById(`tab-${id}`).classList.add('active-tab');

            container.innerHTML = `
                <div class="bg-white p-10 rounded-b-3xl rounded-tr-3xl border border-slate-200 shadow-sm grid grid-cols-1 lg:grid-cols-2 gap-10 fade-in text-left">
                    <div class="space-y-8">
                        <div>
                            <h4 class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-4">業務職掌與全量 OKR</h4>
                            <p class="text-slate-900 font-bold text-2xl leading-relaxed bg-slate-50 p-10 rounded-3xl border-l-8 border-l-sky-500 shadow-inner">${u.full_okr}</p>
                            <p class="text-xs text-sky-600 font-bold mt-6 tracking-widest">資料出處：${u.source}</p>
                        </div>
                        <div class="bg-emerald-50 p-8 rounded-3xl border border-emerald-100 shadow-sm text-center">
                            <h4 class="text-xs font-bold text-emerald-500 uppercase mb-3">年度預期核心效益</h4>
                            <p class="text-slate-700 font-bold italic text-lg leading-relaxed">「${u.benefit}」</p>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 gap-8">
                        <h4 class="text-xs font-bold text-slate-400 mb-0 uppercase tracking-widest">量化績效指標 (KPI)</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            ${u.kpis.map(k => `
                                <div class="bg-white p-8 rounded-[2.5rem] border border-slate-100 shadow-sm flex flex-col justify-center items-center text-center">
                                    <p class="text-4xl font-black text-sky-600 mb-2">${k.v}</p>
                                    <p class="text-xs font-bold text-slate-400 uppercase tracking-widest">${k.t}</p>
                                </div>
                            `).join('')}
                        </div>
                        <div class="mt-4 bg-slate-900 p-12 rounded-[3rem] text-white relative overflow-hidden flex items-center justify-between shadow-2xl">
                            <div class="z-10 text-left">
                                <h4 class="text-sky-400 text-xs font-bold uppercase tracking-widest mb-2">115年度 預算概況</h4>
                                <p class="text-3xl font-black italic tracking-widest">由各計畫核實支應</p>
                                <p class="text-xs opacity-40 mt-1 tracking-widest">詳見主計室預算分配表</p>
                            </div>
                            <i class="fa-solid ${u.icon} text-9xl absolute -right-10 -bottom-10 opacity-10"></i>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderQAList(data) {
            const container = document.getElementById('qa-list-container');
            container.innerHTML = data.map(qa => `
                <button onclick="showQA('${qa.id}')" id="qa-btn-${qa.id}" class="w-full text-left p-6 border-b hover:bg-white transition-all group">
                    <h4 class="font-bold text-slate-800 group-hover:text-rose-600 leading-snug">${qa.title}</h4>
                    <p class="text-[10px] text-slate-400 mt-2 font-bold uppercase tracking-tighter">來源：${qa.source}</p>
                </button>
            `).join('');
            showQA('q1');
        }

        window.showQA = function(id) {
            const qa = fullQA.find(item => item.id === id);
            const container = document.getElementById('qa-detail-display');
            document.querySelectorAll('#qa-list-container button').forEach(b => b.classList.remove('qa-active'));
            document.getElementById(`qa-btn-${id}`).classList.add('qa-active');

            container.innerHTML = `
                <div class="fade-in space-y-12 text-left">
                    <div>
                        <span class="px-4 py-1.5 bg-rose-100 text-rose-600 rounded-full text-xs font-bold tracking-widest uppercase">質詢觀點 / 來源：${qa.source}</span>
                        <h3 class="text-4xl font-black mt-6 text-slate-900 leading-tight">${qa.title}</h3>
                        <div class="mt-8 bg-slate-50 p-10 rounded-[2.5rem] border border-slate-100 italic text-slate-700 font-bold text-lg leading-relaxed shadow-inner">「${qa.issue}」</div>
                    </div>
                    <div class="space-y-6 text-left">
                        <p class="text-2xl font-bold text-slate-800 leading-relaxed italic"><i class="fa-solid fa-microphone-lines text-slate-300 mr-4"></i>${qa.question}</p>
                    </div>
                    <div class="bg-slate-900 p-12 rounded-[4rem] text-white shadow-2xl relative overflow-hidden border-t-8 border-sky-500 shadow-sky-900/20 text-left">
                        <h4 class="text-2xl font-bold mb-8 text-sky-400 flex items-center gap-4">
                            <i class="fa-solid fa-user-shield"></i> 官方預擬答詢要領
                        </h4>
                        <p class="text-slate-300 leading-relaxed text-xl font-medium">${qa.answer}</p>
                        <i class="fa-solid fa-cloud-sun absolute -right-12 -bottom-12 text-[15rem] opacity-5"></i>
                    </div>
                </div>
            `;
        }

        function renderReferenceFiles() {
            const container = document.getElementById('reference-list');
            container.innerHTML = referenceFiles.map(f => `
                <div class="file-link-card p-8 rounded-[2.5rem] flex flex-col gap-3 shadow-sm group bg-white">
                    <div class="flex items-center justify-between mb-4">
                        <span class="text-[10px] font-black bg-slate-100 text-slate-500 px-3 py-1.5 rounded uppercase tracking-widest">${f.type}</span>
                        <i class="fa-solid fa-link text-sky-400 opacity-60 group-hover:opacity-100 transition-all"></i>
                    </div>
                    <span class="text-lg font-black text-slate-800 leading-tight">${f.name}</span>
                    <p class="text-xs text-slate-500 leading-relaxed font-medium mt-2">${f.desc}</p>
                    <div class="mt-6 pt-6 border-t border-slate-50 text-left">
                        <span class="text-[10px] font-black text-slate-300 uppercase tracking-widest">系統編號: ${f.id}</span>
                    </div>
                </div>
            `).join('');
        }

        function filterQA() {
            const term = document.getElementById('qa-search').value.toLowerCase();
            const filtered = fullQA.filter(q => q.title.toLowerCase().includes(term) || q.answer.toLowerCase().includes(term));
            const container = document.getElementById('qa-list-container');
            container.innerHTML = filtered.map(qa => `
                <button onclick="showQA('${qa.id}')" id="qa-btn-${qa.id}" class="w-full text-left p-6 border-b hover:bg-white transition-all group">
                    <h4 class="font-bold text-slate-800 group-hover:text-rose-600 leading-snug">${qa.title}</h4>
                    <p class="text-[10px] text-slate-400 mt-2 font-bold uppercase tracking-tighter">來源對應：${qa.source}</p>
                </button>
            `).join('');
        }
    </script>
</body>
</html>
